namespace DcdrFlatBuffers;

table WorkerLoginResponse
{
    // additional data could be added later
}

table ChunkTaskInfo
{
    taskId: uint32;

    sceneId: uint32;
    sceneWidth: uint16;
    sceneHeight: uint16;

    x: uint16;
    y: uint16;
    width: uint16;
    height: uint16;

    minIterations: uint32;
    maxIterations: uint32;
}

table WorkerPollTasksResponse
{
    taskList: [ChunkTaskInfo];
}

table WorkerServerStatusResponse
{
    status: WorkerServerStatus;
    message: string;
}

table WorkerDownloadSceneResponse
{
    sceneId: uint32;
    offset: uint64;
    bytesLeft: uint64;
    data: [ubyte];
}

union WorkerResponseData
{
    WorkerServerStatusResponse,
    WorkerLoginResponse,
    WorkerPollTasksResponse,
    WorkerDownloadSceneResponse
}

table WorkerResponse
{
    nodeId: uint32;
    responseData: WorkerResponseData;
}